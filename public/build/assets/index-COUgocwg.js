import{r as e,j as s,$ as a,M as r,a0 as t,a1 as n,D as i,a2 as l,a3 as o,a4 as c,E as d,q as m,z as p}from"./ui-IMQ67UtN.js";import{H as x,a as h}from"./heading-BtMvnFQ6.js";import{A as j}from"./app-layout-DB0eL30t.js";import{q as u,c as f,t as v,m as y,Y as g,v as b,$ as T}from"./app-BzIHB5MS.js";import{I as N,a as w}from"./icons-ByXrcAkj.js";import{z as S}from"./transition-B7rTVCoK.js";import"./vendor-C8WA2gAO.js";import"./useModal-BujSF1za.js";import"./app-logo-BXc3ETVF.js";import"./app-logo-icon-Dbm-KSvO.js";import"./utils-DwRR_onx.js";import"./use-mobile-navigation-BypUKXbd.js";/* empty css            */const C={},z={},k=()=>{const[,s]=e.useState(0),a=String(u().props.csrf_token);return{can:(e,r=null)=>{const t=((e,s=null)=>`${e}-${JSON.stringify(s)}`)(e,r);return t in C?C[t]:(z[t]||(z[t]=!0,fetch("/check-permission",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":a,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({permission:e,resource:r}),credentials:"same-origin"}).then((e=>e.json())).then((e=>{C[t]=e.can??!1})).catch((()=>{C[t]=!1})).finally((()=>{delete z[t],s((e=>e+1))}))),!1)}}};function _({team_id:p,data:x}){const{can:h}=k(),j=(null==x?void 0:x.map((x=>s.jsxs(l.Tr,{children:[s.jsx(l.Td,{children:s.jsxs(n,{gap:"sm",children:[s.jsx(o,{size:30,src:x.avatar_url,radius:30}),s.jsx(t,{fz:"sm",fw:500,children:x.name})]})}),s.jsx(l.Td,{children:s.jsx(n,{gap:"sm",children:s.jsx(c,{children:x.role})})}),s.jsx(l.Td,{children:s.jsx(d,{component:"button",size:"sm",children:x.email})}),s.jsx(l.Td,{children:s.jsxs(n,{gap:0,justify:"flex-end",children:[s.jsx(m,{variant:"subtle",color:"gray",children:s.jsx(N,{size:16,stroke:1.5})}),h("removeTeamMember",{team:p,user:x.id})?s.jsx(m,{onClick:async()=>{return await(l="Delete this item?",new Promise((o=>{const c=document.createElement("div");document.body.appendChild(c);const d=()=>{const[d,p]=e.useState(!0),x=e=>{p(!1),setTimeout((()=>{m.unmount(),c.remove(),o(e)}),200)};return s.jsx(a,{theme:v,children:s.jsxs(r,{opened:d,onClose:()=>x(!1),title:"Confirm",centered:!0,children:[s.jsx(t,{mb:"md",children:l}),s.jsxs(n,{justify:"flex-end",children:[s.jsx(i,{variant:"default",onClick:()=>x(!1),children:"No"}),s.jsx(i,{color:"red",onClick:()=>x(!0),children:"Yes"})]})]})})},m=f.createRoot(c);m.render(s.jsx(d,{}))})))&&(async e=>{y.delete(route("module.team-member.delete",[p,e]),{preserveScroll:!0})})(x.id);var l},variant:"subtle",color:"red",children:s.jsx(w,{size:16,stroke:1.5})}):null]})})]},x.name))))??[];return 0===j.length?s.jsx(t,{color:"dimmed",align:"center",size:"sm",children:"Nothing found"}):s.jsx(l.ScrollContainer,{minWidth:800,children:s.jsxs(l,{verticalSpacing:"sm",children:[s.jsx(l.Thead,{children:s.jsxs(l.Tr,{children:[s.jsx("div",{}),s.jsx(l.Th,{children:"Member"}),s.jsx(l.Th,{children:"Position"}),s.jsx(l.Th,{children:"Email"}),s.jsx(l.Th,{})]})}),s.jsx(l.Tbody,{children:j??[]})]})})}const M=[{title:"Overview",href:"/teams",icon:null}];function $({children:e}){if("undefined"==typeof window)return null;const a=window.location.pathname;return s.jsxs("div",{className:"px-4 py-6",children:[s.jsx(x,{title:"Teams",description:"Manage your teams"}),s.jsxs("div",{className:"flex flex-col space-y-8 lg:flex-row lg:space-y-0 lg:space-x-12",children:[s.jsx("aside",{className:"w-full max-w-xl lg:w-48",children:s.jsx("nav",{className:"flex flex-col space-y-1 space-x-0",children:M.map(((e,r)=>s.jsx(i,{href:e.href,component:g,prefetch:!0,size:"sm",justify:"start",color:"gray",variant:"subtle",styles:{root:{...a===e.href&&{backgroundColor:"var(--color-muted)"}}},children:e.title},`${e.href}-${r}`)))})}),s.jsx("div",{className:"bg-border my-6 border-2 md:hidden"}),s.jsx("div",{className:"flex-1 md:max-w-4xl",children:s.jsx("section",{className:"max-w-4xl space-y-12",children:e})})]})]})}const E=[{title:"Team",href:"/teams/index"}];function O({current_team:e}){const{auth:{can:a}}=u().props,{data:r,setData:t,patch:n,errors:l,processing:o,recentlySuccessful:c}=b({name:e.name});return s.jsxs(j,{breadcrumbs:E,children:[s.jsx(T,{title:"Index"}),s.jsxs($,{children:[a.update_team&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(h,{title:"Team information",description:"Update your team"}),s.jsxs("form",{onSubmit:s=>{s.preventDefault(),n(route("module.team.update",e.id),{preserveScroll:!0})},className:"space-y-6",children:[s.jsx("div",{className:"grid gap-2",children:s.jsx(p,{id:"name",className:"mt-1 block w-full",label:"Team name",value:r.name,error:l.name,onChange:e=>t("name",e.target.value),required:!0,autoComplete:"name",placeholder:"Enter your team name"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(i,{type:"submit",disabled:o,children:"Save"}),s.jsx(S,{show:c,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:s.jsx("p",{className:"text-sm text-neutral-600",children:"Saved"})})]})]})]}),a.view_team_members&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(h,{title:"Team Members",description:"Update your team members"}),s.jsx(_,{team_id:e.id,data:e.members})]})]})]})}export{O as default};
