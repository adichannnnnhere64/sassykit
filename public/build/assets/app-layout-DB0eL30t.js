import{r as e,a6 as s,j as t,q as r,D as n,ak as a,a3 as o,t as i,o as l,aJ as c,a1 as d,aG as m}from"./ui-IMQ67UtN.js";import{c as h,u as x,a as u}from"./useModal-BujSF1za.js";import{k as f,a0 as p,a1 as j,a2 as g,a3 as b,e as v,a4 as w,o as N}from"./icons-ByXrcAkj.js";import{Y as y,q as k,m as z,u as S}from"./app-BzIHB5MS.js";import{A,u as C}from"./app-logo-BXc3ETVF.js";import{c as E}from"./utils-DwRR_onx.js";import{u as D}from"./use-mobile-navigation-BypUKXbd.js";function F({children:t,target:r}){const[n,a]=e.useState(null);return e.useEffect((()=>{const e="string"==typeof r?document.getElementById(r):r;a(e)}),[r]),n?s.createPortal(t,n):null}function I({children:s,show:n,onClose:a}){e.useEffect((()=>{if(!n)return;const e=e=>{"Escape"===e.key&&a&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[n,a]);return n?t.jsx(F,{target:"app",children:t.jsx("div",{className:"fixed inset-0 z-[50000] flex items-center justify-center bg-black/75",onClick:e=>{e.target instanceof Element&&e.target.hasAttribute("data-modal-backdrop")&&a&&(e.preventDefault(),e.stopPropagation(),a())},"data-modal-backdrop":!0,children:t.jsxs("div",{className:"min-w-[400px] dark:bg-card relative rounded-lg bg-white py-8 px-4",children:[t.jsx(r,{variant:"subtle",color:"gray",className:"!absolute !top-2 !right-2 pb-4",onClick:h,children:t.jsx(f,{size:16})}),s]})})}):null}function O(){const[s,r]=e.useState(x());if(e.useEffect((()=>u(r)),[]),!s.show||!s.resolvedComponent)return null;const n=s.resolvedComponent;return t.jsx(I,{show:s.show,onClose:()=>{h(),r({...x()})},children:t.jsx(e.Suspense,{fallback:t.jsx("div",{children:"Loading."}),children:t.jsx(n,{...s.props})})})}function T({children:e,...s}){return t.jsx("div",{className:"mt-8 mx-auto flex h-full w-full max-w-7xl flex-1 flex-col gap-4",...s,children:e})}function L({className:e,tooltip:s,isActive:r,icon:o,styles:i,iconOnly:l,children:c,...d}){var m;const h=({children:e})=>t.jsx(t.Fragment,{children:t.jsx("div",{className:E("flex h-full flex-col items-center justify-center",r&&"border-b-foreground border-b"),children:s?t.jsx(a,{withArrow:!0,arrowSize:6,offset:10,label:t.jsx("span",{className:"text-xs",children:s}),children:e}):e})});return t.jsx(h,{children:t.jsx(n,{size:"sm",color:"gray",variant:"subtle",leftSection:o,justify:l?"center":"start",className:E("text-foreground w-full transition-none",e,l&&"p-2!"),styles:{...i||{},root:{color:"var(--foreground)",...r&&{backgroundColor:"var(--muted)"},...(null==(m=d.styles)?void 0:m.root)||{}},...l&&{section:{marginRight:0,...(null==i?void 0:i.section)||{}}}},...d,children:!l&&c})})}function _({user:s,showName:r=!1,showEmail:n=!1}){const a=e.useCallback((e=>{const s=e.trim().split(" ");return 0===s.length?"":1===s.length?s[0].charAt(0).toUpperCase():`${s[0].charAt(0)}${s[s.length-1].charAt(0)}`.toUpperCase()}),[]);return t.jsxs("div",{className:"text-foreground flex items-center gap-x-2",children:[t.jsx(o,{name:a(s.name),size:"md",radius:"xl",imageProps:{src:s.avatar,alt:s.name}}),(r||n)&&t.jsxs("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[r&&t.jsx("span",{className:"text-foreground truncate text-sm font-medium",children:s.name}),n&&t.jsx("span",{className:"text-muted-foreground truncate text-xs font-light",children:s.email})]})]})}const B=({tooltip:e,isActive:s,iconOnly:r,children:n})=>t.jsx(t.Fragment,{children:t.jsx("div",{className:E("flex items-stretch",s&&""),children:e&&r?t.jsx(a,{className:"self-stretch",withArrow:!0,position:"right",arrowSize:6,offset:10,label:t.jsx("span",{className:"text-xs",children:e}),children:n}):n})});function M({className:e,isActive:s,icon:r,iconOnly:a,tooltip:o,styles:i,children:l,...c}){var d;return t.jsx(t.Fragment,{children:t.jsx(B,{tooltip:o,isActive:s,iconOnly:a,children:t.jsx(n,{component:y,size:"md",color:"gray",variant:"subtle",leftSection:r,justify:a?"center":"start",className:E("text-foreground h-8! w-full flex-1 transition-none",e,a&&"p-2!"),styles:{...i||{},root:{color:"var(--foreground)",...s&&{backgroundColor:"var(--muted)"},...(null==(d=c.styles)?void 0:d.root)||{}},...a&&{section:{marginRight:0,...(null==i?void 0:i.section)||{}}}},...c,children:!a&&l})})})}function P({variant:e,collapsed:s=!1}){var r,n,a;const{auth:o,module:l}=k().props,c=D();return t.jsxs(t.Fragment,{children:[t.jsxs(i,{shadow:"md",width:230,position:"header"===e?"bottom-end":s?"right-end":"top-start",children:[t.jsx(i.Target,{children:t.jsx(M,{component:"button",className:E("h-12! p-0.5! px-1!",s&&"p-1!"),classNames:{inner:"items-stretch! justify-between!"},rightSection:"sidebar"==e&&!s&&t.jsx(p,{color:"var(--foreground)",size:20}),children:t.jsx(_,{user:o.user,showName:"sidebar"==e&&!s})})}),t.jsxs(i.Dropdown,{className:"border-border border-2",children:[t.jsx(i.Label,{children:t.jsx(_,{user:o.user,showEmail:!0})}),t.jsx(i.Divider,{}),t.jsx(i.Item,{component:y,href:route("billings.overview"),leftSection:t.jsx(j,{color:"gray",size:20}),children:"Billing"}),t.jsx(i.Item,{component:y,href:route("profile.edit"),leftSection:t.jsx(g,{color:"gray",size:20}),children:"Settings"}),void 0,(null==l?void 0:l.has_team)&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"pl-3 text-muted-foreground text-xs",children:"Teams"}),t.jsx(i.Item,{children:null==(r=l.team)?void 0:r.name})]}),t.jsx(i.Divider,{}),t.jsx("form",{onSubmit:e=>{e.preventDefault(),c(),z.flushAll(),z.post(route("logout"))},children:t.jsx(i.Item,{leftSection:t.jsx(b,{color:"gray"}),type:"submit",children:"Log Out"})})]})]}),l.has_team&&t.jsxs(i,{shadow:"md",width:230,position:"header"===e?"bottom-end":s?"right-end":"top-start",children:[t.jsx(i.Target,{children:t.jsx(M,{component:"button",className:E("h-12! p-0.5! px-1! text-xs!",s&&"p-1!"),classNames:{inner:"items-stretch! justify-between!"},children:"Teams"})}),t.jsxs(i.Dropdown,{className:"border-border border-2",children:[t.jsx("span",{className:"pl-3 text-muted-foreground text-xs",children:t.jsx(y,{href:route("module.team.index"),children:"Teams"})}),t.jsx(i.Divider,{}),void 0,(null==l?void 0:l.has_team)&&t.jsx(t.Fragment,{children:(null==(n=l.team)?void 0:n.teams.length)>0?null==(a=l.team)?void 0:a.teams.map((e=>t.jsx(i.Item,{component:y,href:route("module.team.set-current",e.id),method:"patch",children:t.jsxs("span",{className:"flex items-center !space-x-2",children:[t.jsx("span",{className:"truncate",children:e.name})," ",l.team.current_team.id===e.id&&t.jsx(v,{size:14})]})},e.id))):t.jsx("div",{children:"Create Team"})})]})]})]})}const R=[{title:"Dashboard",href:"/dashboard",icon:w}],U=[];function $({children:e,breadcrumbs:s}){const[r,{toggle:a}]=l(),o=window.location.pathname;return t.jsxs(c,{header:{height:60},navbar:{width:300,breakpoint:"sm",collapsed:{desktop:!0,mobile:!r}},children:[t.jsx(c.Header,{className:"bg-background!",children:t.jsxs("div",{className:"md:mx-w-7xl flex h-full items-center justify-between px-6 md:px-4",children:[t.jsxs(d,{h:"100%",children:[t.jsx(m,{component:n,opened:r,onClick:a,hiddenFrom:"sm",size:"sm"}),t.jsxs(d,{h:"100%",justify:"space-between",style:{flex:1},children:[t.jsx(L,{component:y,prefetch:!0,href:route("dashboard"),className:"bg-transparent! px-2!",children:t.jsx(A,{})}),t.jsx(d,{h:"100%",ml:"xl",gap:0,visibleFrom:"sm",children:R.map((e=>t.jsx(L,{component:y,href:e.href,isActive:o===e.href,leftSection:e.icon&&t.jsx(e.icon,{size:20}),children:e.title},e.href)))})]})]}),t.jsxs("div",{className:"flex h-full items-center gap-x-2",children:[t.jsx(L,{tooltip:"Search",classNames:{root:"bg-transparent! hover:bg-muted! px-2! hidden! md:block!"},children:t.jsx(N,{color:"var(--foreground)",className:"!size-5 opacity-80 group-hover:opacity-100"})}),U.map((e=>t.jsx(L,{component:e.href.indexOf("://")>-1?"a":y,href:e.href,tooltip:e.title,classNames:{root:"bg-transparent! hover:bg-muted! px-2! hidden! md:block!"},children:e.icon&&t.jsx(e.icon,{size:20})},e.href))),t.jsx(P,{variant:"header"})]})]})}),t.jsx(c.Navbar,{py:"md",px:4,children:t.jsxs("div",{className:"flex h-full flex-col justify-between",children:[t.jsx("div",{className:"flex flex-col gap-y-2",children:R.map((e=>t.jsx(n,{component:y,href:e.href,justify:"start",size:"sm",leftSection:e.icon&&t.jsx(e.icon,{size:20}),classNames:{root:"bg-transparent! hover:bg-muted!"},children:e.title},e.href)))}),t.jsx("div",{className:"flex flex-col gap-y-2",children:U.map((e=>t.jsx(n,{component:y,href:e.href,justify:"start",size:"sm",leftSection:e.icon&&t.jsx(e.icon,{size:20}),classNames:{root:"bg-transparent! hover:bg-muted!"},children:e.title},e.href)))})]})}),t.jsx(c.Main,{className:"bg-background flex h-full w-full flex-col rounded-xl",children:t.jsx(T,{children:e})})]})}const q=({children:e,breadcrumbs:s,...r})=>(S(),C(),t.jsxs($,{breadcrumbs:s,...r,children:[e,t.jsx(O,{})]}));export{q as A,I as M};
